<!--
    InSight - Device Ownership View
    Author: Kosta Wadenfalk
    GitHub: https://github.com/MrOlof
-->
<ScrollViewer x:Name="DeviceOwnershipView" Visibility="Collapsed" Padding="30">
    <StackPanel>
        <!-- Header -->
        <StackPanel Margin="0,0,0,30">
            <TextBlock Text="Device Ownership Analysis" FontSize="{DynamicResource FontSizeHeader}" FontWeight="SemiBold" Foreground="{DynamicResource TextPrimaryBrush}"/>
            <TextBlock Text="Select a user group and analyze which members have registered Intune devices, identify users with no devices, and find users with multiple devices" FontSize="{DynamicResource FontSizeNormal}" Foreground="{DynamicResource TextSecondaryBrush}" Margin="0,8,0,0"/>
        </StackPanel>

        <!-- Group Analysis Section -->
        <Border Style="{StaticResource CardStyle}" Margin="0,0,0,30">
            <StackPanel>
                <Grid Margin="0,0,0,20">
                    <TextBlock Text="Group Device Analysis" FontSize="{DynamicResource FontSizeLarge}" FontWeight="SemiBold" Foreground="{DynamicResource TextPrimaryBrush}"/>
                    <Button x:Name="SearchOwnershipGroupButton" Content="1. Search Group" Style="{StaticResource ModernButtonStyle}" HorizontalAlignment="Right"/>
                </Grid>
                <TextBlock Text="Search for an Entra ID group to analyze device ownership for all members" FontSize="{DynamicResource FontSizeNormal}" Foreground="{DynamicResource TextSecondaryBrush}" Margin="0,0,0,12"/>
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="20"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <TextBox x:Name="OwnershipGroupSearchBox" Grid.Column="0" Style="{StaticResource ModernTextBoxStyle}" Padding="12,10" Foreground="{DynamicResource TextTertiaryBrush}" Text="Enter group display name..."/>
                    <Button x:Name="AnalyzeOwnershipButton" Grid.Column="2" Content="2. Analyze Devices" Style="{StaticResource SecondaryButtonStyle}" Padding="16,10" IsEnabled="False"/>
                </Grid>

                <!-- Include Nested Groups Option -->
                <CheckBox x:Name="IncludeNestedGroupsCheckBox" Content="Include nested groups (transitive membership)" Margin="0,12,0,0" FontSize="{DynamicResource FontSizeNormal}" Foreground="{DynamicResource TextSecondaryBrush}" VerticalContentAlignment="Center">
                    <CheckBox.ToolTip>
                        <ToolTip Content="When enabled, analyzes members from nested child groups in addition to direct group members" FontSize="{DynamicResource FontSizeSmall}"/>
                    </CheckBox.ToolTip>
                </CheckBox>

                <!-- Loading Indicator -->
                <TextBlock x:Name="OwnershipLoadingText" Text="Analyzing device ownership..." FontSize="{DynamicResource FontSizeNormal}" Foreground="{DynamicResource TextSecondaryBrush}" Margin="0,20,0,0" Visibility="Collapsed"/>

                <!-- Results Summary Cards -->
                <Grid x:Name="OwnershipSummaryCards" Margin="0,20,0,0" Visibility="Collapsed">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="20"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="20"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <!-- Users with No Devices -->
                    <Border Grid.Column="0" Background="{DynamicResource BackgroundBrush}" BorderBrush="{DynamicResource WarningBrush}" BorderThickness="2" CornerRadius="8" Padding="16,12">
                        <StackPanel>
                            <TextBlock Text="&#xE7BA;" FontFamily="Segoe MDL2 Assets" FontSize="32" Foreground="{DynamicResource WarningBrush}" HorizontalAlignment="Center" Margin="0,0,0,12"/>
                            <TextBlock Text="No Devices" FontWeight="SemiBold" HorizontalAlignment="Center" FontSize="{DynamicResource FontSizeMedium}"/>
                            <TextBlock x:Name="NoDevicesCount" Text="0 users" FontSize="{DynamicResource FontSizeNormal}" Foreground="{DynamicResource TextSecondaryBrush}" HorizontalAlignment="Center" Margin="0,4,0,8"/>
                            <Button x:Name="ViewNoDevicesButton" Content="View Details" Style="{StaticResource SecondaryButtonStyle}" Padding="8,4" FontSize="{DynamicResource FontSizeSmall}" HorizontalAlignment="Center"/>
                        </StackPanel>
                    </Border>

                    <!-- Users with Multiple Devices -->
                    <Border Grid.Column="2" Background="{DynamicResource BackgroundBrush}" BorderBrush="{DynamicResource InfoBrush}" BorderThickness="2" CornerRadius="8" Padding="16,12">
                        <StackPanel>
                            <TextBlock Text="&#xE8B7;" FontFamily="Segoe MDL2 Assets" FontSize="32" Foreground="{DynamicResource InfoBrush}" HorizontalAlignment="Center" Margin="0,0,0,12"/>
                            <TextBlock Text="Multiple Devices" FontWeight="SemiBold" HorizontalAlignment="Center" FontSize="{DynamicResource FontSizeMedium}"/>
                            <TextBlock x:Name="MultipleDevicesCount" Text="0 users" FontSize="{DynamicResource FontSizeNormal}" Foreground="{DynamicResource TextSecondaryBrush}" HorizontalAlignment="Center" Margin="0,4,0,8"/>
                            <Button x:Name="ViewMultipleDevicesButton" Content="View Details" Style="{StaticResource SecondaryButtonStyle}" Padding="8,4" FontSize="{DynamicResource FontSizeSmall}" HorizontalAlignment="Center"/>
                        </StackPanel>
                    </Border>

                    <!-- Users with Single Device -->
                    <Border Grid.Column="4" Background="{DynamicResource BackgroundBrush}" BorderBrush="{DynamicResource SuccessBrush}" BorderThickness="2" CornerRadius="8" Padding="16,12">
                        <StackPanel>
                            <TextBlock Text="&#xE8EA;" FontFamily="Segoe MDL2 Assets" FontSize="32" Foreground="{DynamicResource SuccessBrush}" HorizontalAlignment="Center" Margin="0,0,0,12"/>
                            <TextBlock Text="Single Device" FontWeight="SemiBold" HorizontalAlignment="Center" FontSize="{DynamicResource FontSizeMedium}"/>
                            <TextBlock x:Name="SingleDeviceCount" Text="0 users" FontSize="{DynamicResource FontSizeNormal}" Foreground="{DynamicResource TextSecondaryBrush}" HorizontalAlignment="Center" Margin="0,4,0,8"/>
                            <Button x:Name="ViewSingleDeviceButton" Content="View Details" Style="{StaticResource SecondaryButtonStyle}" Padding="8,4" FontSize="{DynamicResource FontSizeSmall}" HorizontalAlignment="Center"/>
                        </StackPanel>
                    </Border>
                </Grid>

                <!-- Export Button -->
                <Button x:Name="ExportOwnershipButton" Content="Export Results to CSV" Style="{StaticResource SecondaryButtonStyle}" HorizontalAlignment="Left" Margin="0,20,0,0" Visibility="Collapsed"/>
            </StackPanel>
        </Border>

        <!-- Detailed Results Panel -->
        <StackPanel x:Name="OwnershipResultsPanel" Visibility="Collapsed"/>

    </StackPanel>
</ScrollViewer>
